{"version":3,"file":"author-slider.es5.js","sources":["../src/element.js"],"sourcesContent":["class AuthorSliderElement extends AuthorBaseElement(HTMLElement) {\n  constructor (templateString = null) {\n    super(templateString || `{{TEMPLATE-STRING}}`)\n\n    this.UTIL.defineProperties({\n      defaultAxis: {\n        private: true,\n        default: 'x'\n      },\n\n      dimensions: {\n        private: true,\n        readonly: true,\n        get: () => this.getBoundingClientRect()\n      },\n\n      handles: {\n        private: true,\n        readonly: true,\n        get: () => this.querySelectorAll('author-slider-handle')\n      },\n\n      validAxisValues: {\n        private: true,\n        readonly: true,\n        default: ['x', 'y', '*']\n      },\n\n      currentPosition: {\n        private: true,\n        default: {\n          x: 0,\n          y: 0\n        }\n      },\n\n      position: {\n        private: true,\n        default: {\n          x: 0,\n          y: 0\n        }\n      },\n\n      previousPosition: {\n        private: true,\n        default: {\n          x: 0,\n          y: 0\n        }\n      }\n    })\n\n    this.UTIL.defineAttributes({\n      axis: this.PRIVATE.defaultAxis\n    })\n\n    this.UTIL.definePrivateMethods({\n      generateCoordinates: (getX, getY) => {\n        switch (this.axis) {\n          case '*': return {\n            x: getX(),\n            y: getY()\n          }\n\n          case 'x': return {\n            x: getX(),\n            y: null\n          }\n\n          case 'y': return {\n            x: null,\n            y: getY()\n          }\n\n          default: return this.UTIL.throwError({\n            message: !this.axis\n              ? 'No axis specified'\n              : `Invalid axis \"${this.axis}\"`\n          })\n        }\n      },\n\n      generatePositionObject: (position = this.PRIVATE.position) => this.PRIVATE.generateCoordinates(() => ({\n        px: position.x,\n        pct: this.UTIL.getPercentageDecimal(position.x, this.clientWidth)\n      }), () => ({\n        px: position.y,\n        pct: this.UTIL.getPercentageDecimal(position.y, this.clientHeight)\n      })),\n\n      getRelativePosition: evt => {\n        let { top, left, width, height } = this.PRIVATE.dimensions\n\n        return this.PRIVATE.generateCoordinates(() => {\n          return Math.min(Math.max(evt.pageX - this.offsetLeft, 0), this.clientWidth)\n        }, () => {\n          return Math.min(Math.max(evt.pageY - this.offsetTop, 0), this.clientHeight)\n        })\n      },\n\n      pointerdownHandler: evt => {\n        let previous = this.PRIVATE.position\n        let reposition = true\n        this.PRIVATE.position = this.PRIVATE.getRelativePosition(evt)\n\n        let { handles, position, pointermoveHandler } = this.PRIVATE\n\n        if (handles.length > 1) {\n          return\n        }\n\n        if (handles.length !== 0) {\n          handles.item(0).position = this.position\n        }\n\n        this.emit('change', {\n          previous: this.PRIVATE.generatePositionObject(previous),\n          position: this.position\n        })\n\n        document.addEventListener('pointermove', this.PRIVATE.pointermoveHandler)\n      },\n\n      pointermoveHandler: evt => {\n        if (evt.buttons < 1) {\n          return\n        }\n\n        document.addEventListener('pointerup', this.PRIVATE.pointerupHandler)\n\n        let { handles } = this.PRIVATE\n        let relative = this.PRIVATE.getRelativePosition(evt)\n\n        if ((!this.position.x || relative.x !== this.position.x.px) || (!this.position.y || relative.y !== this.position.y.px)) {\n          this.PRIVATE.currentPosition = relative\n          let position = this.PRIVATE.generatePositionObject(this.PRIVATE.currentPosition)\n\n          if (handles.length !== 0) {\n            handles.item(0).position = position\n          }\n\n          this.emit('slide', position)\n        }\n      },\n\n      pointerupHandler: evt => {\n        let { currentPosition, handles, pointermoveHandler, pointerupHandler } = this.PRIVATE\n        let reposition = true\n\n        this.PRIVATE.position = currentPosition\n\n        if (handles.length > 1) {\n          reposition = false\n        } else if (handles.length !== 0) {\n          handles.item(0).position = this.position\n        }\n\n        if (reposition) {\n          this.emit('change', {\n            previous: this.previousPosition,\n            position: this.position\n          })\n\n          this.PRIVATE.previousPosition = currentPosition\n        }\n\n        document.removeEventListener('pointermove', pointermoveHandler)\n        document.removeEventListener('pointerup', pointerupHandler)\n      }\n    })\n\n    this.UTIL.registerListeners(this, {\n      'attribute.change': evt => {\n        let { attribute, oldValue, newValue } = evt.detail\n\n        if (newValue === oldValue) {\n          return\n        }\n\n        let { defaultAxis, validAxisValues } = this.PRIVATE\n\n        switch (attribute) {\n          case 'axis':\n            let arr = newValue.split(' ').filter(axis => validAxisValues.includes(axis))\n\n            if (!arr.length) {\n              this.setAttribute('axis', defaultAxis)\n\n              return this.UTIL.throwError({\n                message: `Invalid axis \"${newValue}\". Valid values include any combination of the following, separated by spaces: \"${validAxisValues.join('\", \"')}\"`\n              })\n            }\n\n            break\n        }\n      },\n\n      pointerdown: this.PRIVATE.pointerdownHandler\n    })\n  }\n\n  static get observedAttributes () {\n    return ['axis']\n  }\n\n  get previousPosition () {\n    return this.PRIVATE.generatePositionObject(this.PRIVATE.previousPosition)\n  }\n\n  get position () {\n    return this.PRIVATE.generatePositionObject(this.PRIVATE.position)\n  }\n}\n\ncustomElements.define('author-slider', AuthorSliderElement)\n\nexport default AuthorSliderElement\n"],"names":["AuthorSliderElement","templateString","UTIL","defineProperties","defaultAxis","private","default","dimensions","readonly","get","getBoundingClientRect","handles","querySelectorAll","validAxisValues","currentPosition","x","y","position","previousPosition","defineAttributes","axis","PRIVATE","definePrivateMethods","generateCoordinates","getX","getY","throwError","message","generatePositionObject","px","pct","getPercentageDecimal","clientWidth","clientHeight","getRelativePosition","evt","top","left","width","height","Math","min","max","pageX","offsetLeft","pageY","offsetTop","pointerdownHandler","previous","pointermoveHandler","length","item","emit","document","addEventListener","buttons","pointerupHandler","relative","reposition","removeEventListener","registerListeners","detail","attribute","oldValue","newValue","arr","split","filter","includes","setAttribute","join","pointerdown","AuthorBaseElement","HTMLElement","customElements","define"],"mappings":"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"}