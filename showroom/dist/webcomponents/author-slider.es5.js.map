{"version":3,"file":"author-slider.es5.js","sources":["../src/element.js"],"sourcesContent":["class AuthorSliderElement extends AuthorBaseElement(HTMLElement) {\n  constructor (templateString = null) {\n    super(templateString || `{{TEMPLATE-STRING}}`)\n\n    this.UTIL.defineProperties({\n      defaultAxis: {\n        private: true,\n        readonly: true,\n        default: 'x'\n      },\n\n      dimensions: {\n        private: true,\n        readonly: true,\n        get: () => this.getBoundingClientRect()\n      },\n\n      handles: {\n        private: true,\n        readonly: true,\n        get: () => this.querySelectorAll('author-slider-handle')\n      },\n\n      validAxisValues: {\n        private: true,\n        readonly: true,\n        default: ['x', 'y', '*']\n      },\n\n      currentPosition: {\n        private: true,\n        default: {\n          x: 0,\n          y: 0\n        }\n      },\n\n      position: {\n        private: true,\n        default: {\n          x: 0,\n          y: 0\n        }\n      },\n\n      previousPosition: {\n        private: true,\n        default: {\n          x: 0,\n          y: 0\n        }\n      }\n    })\n\n    this.UTIL.defineAttributes({\n      axis: this.PRIVATE.defaultAxis\n    })\n\n    this.UTIL.definePrivateMethods({\n      generateCoordinates: (getX, getY) => {\n        switch (this.axis) {\n          case '*': return {\n            x: getX(),\n            y: getY()\n          }\n\n          case 'x': return {\n            x: getX(),\n            y: null\n          }\n\n          case 'y': return {\n            x: null,\n            y: getY()\n          }\n\n          default: return this.UTIL.throwError({\n            message: !this.axis\n              ? 'No axis specified'\n              : `Invalid axis \"${this.axis}\"`\n          })\n        }\n      },\n\n      generatePositionObject: (position = this.PRIVATE.position) => this.PRIVATE.generateCoordinates(() => ({\n        px: position.x,\n        pct: this.UTIL.getPercentageDecimal(position.x, this.clientWidth)\n      }), () => ({\n        px: position.y,\n        pct: this.UTIL.getPercentageDecimal(position.y, this.clientHeight)\n      })),\n\n      getRelativePosition: evt => {\n        let { top, left, width, height } = this.PRIVATE.dimensions\n\n        return this.PRIVATE.generateCoordinates(() => {\n          return Math.min(Math.max(evt.pageX - left - pageXOffset, 0), width)\n        }, () => {\n          return Math.min(Math.max(evt.pageY - top - pageYOffset, 0), height)\n        })\n      },\n\n      pointermoveHandler: evt => {\n        if (evt.buttons < 1) {\n          return\n        }\n\n        document.addEventListener('pointerup', this.PRIVATE.pointerupHandler)\n\n        let { handles } = this.PRIVATE\n        let relative = this.PRIVATE.getRelativePosition(evt)\n\n        if ((!this.position.x || relative.x !== this.position.x.px) || (!this.position.y || relative.y !== this.position.y.px)) {\n          this.PRIVATE.currentPosition = relative\n          let position = this.PRIVATE.generatePositionObject(this.PRIVATE.currentPosition)\n\n          if (handles.length !== 0) {\n            handles.item(0).position = position\n          }\n\n          this.emit('slide', position)\n        }\n      },\n\n      pointerupHandler: evt => {\n        let { currentPosition, handles, pointermoveHandler, pointerupHandler } = this.PRIVATE\n        let reposition = true\n\n        this.PRIVATE.position = currentPosition\n\n        if (handles.length > 1) {\n          reposition = false\n        } else if (handles.length !== 0) {\n          handles.item(0).position = this.position\n        }\n\n        if (reposition) {\n          this.emit('change', {\n            previous: this.previousPosition,\n            position: this.position\n          })\n\n          this.PRIVATE.previousPosition = currentPosition\n        }\n\n        document.removeEventListener('pointermove', pointermoveHandler)\n        document.removeEventListener('pointerup', pointerupHandler)\n      },\n    })\n\n    this.UTIL.registerListeners(this, {\n      'attribute.change': evt => {\n        let { attribute, oldValue, newValue } = evt.detail\n\n        if (newValue === oldValue) {\n          return\n        }\n\n        let { defaultAxis, validAxisValues } = this.PRIVATE\n\n        switch (attribute) {\n          case 'axis':\n            let arr = newValue.split(' ').filter(axis => validAxisValues.includes(axis))\n\n            if (!arr.length) {\n              this.setAttribute('axis', defaultAxis)\n\n              return this.UTIL.throwError({\n                message: `Invalid axis \"${newValue}\". Valid values include any combination of the following, separated by spaces: \"${validAxisValues.join('\", \"')}\"`\n              })\n            }\n\n            break\n        }\n      },\n\n      pointerdown: evt => {\n        let previous = this.PRIVATE.position\n        let reposition = true\n        this.PRIVATE.position = this.PRIVATE.getRelativePosition(evt)\n\n        let { handles, position, pointermoveHandler } = this.PRIVATE\n\n        if (handles.length > 1) {\n          return\n        }\n\n        if (handles.length !== 0) {\n          handles.item(0).position = this.position\n        }\n\n        this.emit('change', {\n          previous: this.PRIVATE.generatePositionObject(previous),\n          position: this.position\n        })\n\n        document.addEventListener('pointermove', this.PRIVATE.pointermoveHandler)\n      }\n    })\n  }\n\n  static get observedAttributes () {\n    return ['axis']\n  }\n\n  get previousPosition () {\n    return this.PRIVATE.generatePositionObject(this.PRIVATE.previousPosition)\n  }\n\n  get position () {\n    return this.PRIVATE.generatePositionObject(this.PRIVATE.position)\n  }\n}\n\ncustomElements.define('author-slider', AuthorSliderElement)\n\nexport default AuthorSliderElement\n"],"names":["AuthorSliderElement","templateString","UTIL","defineProperties","defaultAxis","private","readonly","default","dimensions","get","getBoundingClientRect","handles","querySelectorAll","validAxisValues","currentPosition","x","y","position","previousPosition","defineAttributes","axis","PRIVATE","definePrivateMethods","generateCoordinates","getX","getY","throwError","message","generatePositionObject","px","pct","getPercentageDecimal","clientWidth","clientHeight","getRelativePosition","evt","top","left","width","height","Math","min","max","pageX","pageXOffset","pageY","pageYOffset","pointermoveHandler","buttons","document","addEventListener","pointerupHandler","relative","length","item","emit","reposition","previous","removeEventListener","registerListeners","detail","attribute","oldValue","newValue","arr","split","filter","includes","setAttribute","join","pointerdown","AuthorBaseElement","HTMLElement","customElements","define"],"mappings":"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"}