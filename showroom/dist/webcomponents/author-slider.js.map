{"version":3,"file":"author-slider.js","sources":["../src/element.js"],"sourcesContent":["class AuthorSliderElement extends AuthorBaseElement(HTMLElement) {\n  constructor (templateString = null) {\n    super(templateString || `{{TEMPLATE-STRING}}`)\n\n    this.UTIL.defineProperties({\n      defaultAxis: {\n        private: true,\n        default: 'x'\n      },\n\n      handles: {\n        private: true,\n        readonly: true,\n        get: () => this.querySelectorAll('author-slider-handle')\n      },\n\n      validAxisValues: {\n        private: true,\n        readonly: true,\n        default: ['x', 'y', '*']\n      },\n\n      currentPosition: {\n        private: true,\n        default: {\n          x: 0,\n          y: 0\n        }\n      },\n\n      position: {\n        private: true,\n        default: {\n          x: 0,\n          y: 0\n        }\n      },\n\n      previousPosition: {\n        private: true,\n        default: {\n          x: 0,\n          y: 0\n        }\n      }\n    })\n\n    this.UTIL.defineAttributes({\n      axis: this.PRIVATE.defaultAxis\n    })\n\n    this.UTIL.definePrivateMethods({\n      generateCoordinates: (getX, getY) => {\n        switch (this.axis) {\n          case '*': return {\n            x: getX(),\n            y: getY()\n          }\n\n          case 'x': return {\n            x: getX(),\n            y: null\n          }\n\n          case 'y': return {\n            x: null,\n            y: getY()\n          }\n\n          default: return this.UTIL.throwError({\n            message: !this.axis\n              ? 'No axis specified'\n              : `Invalid axis \"${this.axis}\"`\n          })\n        }\n      },\n\n      generatePositionObject: (position = this.PRIVATE.position) => this.PRIVATE.generateCoordinates(() => ({\n        px: position.x,\n        pct: this.UTIL.getPercentageDecimal(position.x, this.clientWidth)\n      }), () => ({\n        px: position.y,\n        pct: this.UTIL.getPercentageDecimal(position.y, this.clientHeight)\n      })),\n\n      getRelativePosition: evt => {\n        let dims = this.getBoundingClientRect()\n\n        return this.PRIVATE.generateCoordinates(() => {\n          return Math.min(Math.max(evt.pageX - dims.left - window.scrollX, 0), this.clientWidth)\n        }, () => {\n          return Math.min(Math.max(evt.pageY - dims.top - window.scrollY, 0), this.clientHeight)\n        })\n      },\n\n      pointerdownHandler: evt => {\n        let previous = this.PRIVATE.position\n        let reposition = true\n        this.PRIVATE.position = this.PRIVATE.getRelativePosition(evt)\n\n        let { handles, position, pointermoveHandler } = this.PRIVATE\n\n        if (handles.length > 1) {\n          return\n        }\n\n        if (handles.length !== 0) {\n          handles.item(0).position = this.position\n        }\n\n        this.emit('change', {\n          previous: this.PRIVATE.generatePositionObject(previous),\n          position: this.position\n        })\n\n        document.addEventListener('pointermove', this.PRIVATE.pointermoveHandler)\n      },\n\n      pointermoveHandler: evt => {\n        if (evt.buttons < 1) {\n          return\n        }\n\n        document.addEventListener('pointerup', this.PRIVATE.pointerupHandler)\n\n        let { handles } = this.PRIVATE\n        let relative = this.PRIVATE.getRelativePosition(evt)\n\n        if ((!this.position.x || relative.x !== this.position.x.px) || (!this.position.y || relative.y !== this.position.y.px)) {\n          this.PRIVATE.currentPosition = relative\n          let position = this.PRIVATE.generatePositionObject(this.PRIVATE.currentPosition)\n\n          if (handles.length !== 0) {\n            handles.item(0).position = position\n          }\n\n          this.emit('slide', position)\n        }\n      },\n\n      pointerupHandler: evt => {\n        let { currentPosition, handles, pointermoveHandler, pointerupHandler } = this.PRIVATE\n        let reposition = true\n\n        this.PRIVATE.position = currentPosition\n\n        if (handles.length > 1) {\n          reposition = false\n        } else if (handles.length !== 0) {\n          handles.item(0).position = this.position\n        }\n\n        if (reposition) {\n          this.emit('change', {\n            previous: this.previousPosition,\n            position: this.position\n          })\n\n          this.PRIVATE.previousPosition = currentPosition\n        }\n\n        document.removeEventListener('pointermove', pointermoveHandler)\n        document.removeEventListener('pointerup', pointerupHandler)\n      }\n    })\n\n    this.UTIL.registerListeners(this, {\n      'attribute.change': evt => {\n        let { attribute, oldValue, newValue } = evt.detail\n\n        if (newValue === oldValue) {\n          return\n        }\n\n        let { defaultAxis, validAxisValues } = this.PRIVATE\n\n        switch (attribute) {\n          case 'axis':\n            let arr = newValue.split(' ').filter(axis => validAxisValues.includes(axis))\n\n            if (!arr.length) {\n              this.setAttribute('axis', defaultAxis)\n\n              return this.UTIL.throwError({\n                message: `Invalid axis \"${newValue}\". Valid values include any combination of the following, separated by spaces: \"${validAxisValues.join('\", \"')}\"`\n              })\n            }\n\n            break\n        }\n      },\n\n      pointerdown: this.PRIVATE.pointerdownHandler\n    })\n  }\n\n  static get observedAttributes () {\n    return ['axis']\n  }\n\n  get previousPosition () {\n    return this.PRIVATE.generatePositionObject(this.PRIVATE.previousPosition)\n  }\n\n  get position () {\n    return this.PRIVATE.generatePositionObject(this.PRIVATE.position)\n  }\n}\n\ncustomElements.define('author-slider', AuthorSliderElement)\n\nexport default AuthorSliderElement\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;UAAA,MAAM,mBAAmB,SAAS,iBAAiB,CAAC,WAAW,CAAC,CAAC;EACjE,EAAE,WAAW,CAAC,CAAC,cAAc,GAAG,IAAI,EAAE;EACtC,IAAI,KAAK,CAAC,cAAc,IAAI,CAAC,2RAAmB,CAAC,EAAC;;EAElD,IAAI,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC;EAC/B,MAAM,WAAW,EAAE;EACnB,QAAQ,OAAO,EAAE,IAAI;EACrB,QAAQ,OAAO,EAAE,GAAG;EACpB,OAAO;;EAEP,MAAM,OAAO,EAAE;EACf,QAAQ,OAAO,EAAE,IAAI;EACrB,QAAQ,QAAQ,EAAE,IAAI;EACtB,QAAQ,GAAG,EAAE,MAAM,IAAI,CAAC,gBAAgB,CAAC,sBAAsB,CAAC;EAChE,OAAO;;EAEP,MAAM,eAAe,EAAE;EACvB,QAAQ,OAAO,EAAE,IAAI;EACrB,QAAQ,QAAQ,EAAE,IAAI;EACtB,QAAQ,OAAO,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;EAChC,OAAO;;EAEP,MAAM,eAAe,EAAE;EACvB,QAAQ,OAAO,EAAE,IAAI;EACrB,QAAQ,OAAO,EAAE;EACjB,UAAU,CAAC,EAAE,CAAC;EACd,UAAU,CAAC,EAAE,CAAC;EACd,SAAS;EACT,OAAO;;EAEP,MAAM,QAAQ,EAAE;EAChB,QAAQ,OAAO,EAAE,IAAI;EACrB,QAAQ,OAAO,EAAE;EACjB,UAAU,CAAC,EAAE,CAAC;EACd,UAAU,CAAC,EAAE,CAAC;EACd,SAAS;EACT,OAAO;;EAEP,MAAM,gBAAgB,EAAE;EACxB,QAAQ,OAAO,EAAE,IAAI;EACrB,QAAQ,OAAO,EAAE;EACjB,UAAU,CAAC,EAAE,CAAC;EACd,UAAU,CAAC,EAAE,CAAC;EACd,SAAS;EACT,OAAO;EACP,KAAK,EAAC;;EAEN,IAAI,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC;EAC/B,MAAM,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,WAAW;EACpC,KAAK,EAAC;;EAEN,IAAI,IAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC;EACnC,MAAM,mBAAmB,EAAE,CAAC,IAAI,EAAE,IAAI,KAAK;EAC3C,QAAQ,QAAQ,IAAI,CAAC,IAAI;EACzB,UAAU,KAAK,GAAG,EAAE,OAAO;EAC3B,YAAY,CAAC,EAAE,IAAI,EAAE;EACrB,YAAY,CAAC,EAAE,IAAI,EAAE;EACrB,WAAW;;EAEX,UAAU,KAAK,GAAG,EAAE,OAAO;EAC3B,YAAY,CAAC,EAAE,IAAI,EAAE;EACrB,YAAY,CAAC,EAAE,IAAI;EACnB,WAAW;;EAEX,UAAU,KAAK,GAAG,EAAE,OAAO;EAC3B,YAAY,CAAC,EAAE,IAAI;EACnB,YAAY,CAAC,EAAE,IAAI,EAAE;EACrB,WAAW;;EAEX,UAAU,SAAS,OAAO,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC;EAC/C,YAAY,OAAO,EAAE,CAAC,IAAI,CAAC,IAAI;EAC/B,gBAAgB,mBAAmB;EACnC,gBAAgB,CAAC,cAAc,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;EAC7C,WAAW,CAAC;EACZ,SAAS;EACT,OAAO;;EAEP,MAAM,sBAAsB,EAAE,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,KAAK,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,OAAO;EAC5G,QAAQ,EAAE,EAAE,QAAQ,CAAC,CAAC;EACtB,QAAQ,GAAG,EAAE,IAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC,QAAQ,CAAC,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC;EACzE,OAAO,CAAC,EAAE,OAAO;EACjB,QAAQ,EAAE,EAAE,QAAQ,CAAC,CAAC;EACtB,QAAQ,GAAG,EAAE,IAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC,QAAQ,CAAC,CAAC,EAAE,IAAI,CAAC,YAAY,CAAC;EAC1E,OAAO,CAAC,CAAC;;EAET,MAAM,mBAAmB,EAAE,GAAG,IAAI;EAClC,QAAQ,IAAI,IAAI,GAAG,IAAI,CAAC,qBAAqB,GAAE;;EAE/C,QAAQ,OAAO,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,MAAM;EACtD,UAAU,OAAO,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,GAAG,MAAM,CAAC,OAAO,EAAE,CAAC,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC;EAChG,SAAS,EAAE,MAAM;EACjB,UAAU,OAAO,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG,GAAG,MAAM,CAAC,OAAO,EAAE,CAAC,CAAC,EAAE,IAAI,CAAC,YAAY,CAAC;EAChG,SAAS,CAAC;EACV,OAAO;;EAEP,MAAM,kBAAkB,EAAE,GAAG,IAAI;EACjC,QAAQ,IAAI,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,SAAQ;AAC5C,EACA,QAAQ,IAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,GAAG,EAAC;;EAErE,QAAQ,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAE,kBAAkB,EAAE,GAAG,IAAI,CAAC,QAAO;;EAEpE,QAAQ,IAAI,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE;EAChC,UAAU,MAAM;EAChB,SAAS;;EAET,QAAQ,IAAI,OAAO,CAAC,MAAM,KAAK,CAAC,EAAE;EAClC,UAAU,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,GAAG,IAAI,CAAC,SAAQ;EAClD,SAAS;;EAET,QAAQ,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;EAC5B,UAAU,QAAQ,EAAE,IAAI,CAAC,OAAO,CAAC,sBAAsB,CAAC,QAAQ,CAAC;EACjE,UAAU,QAAQ,EAAE,IAAI,CAAC,QAAQ;EACjC,SAAS,EAAC;;EAEV,QAAQ,QAAQ,CAAC,gBAAgB,CAAC,aAAa,EAAE,IAAI,CAAC,OAAO,CAAC,kBAAkB,EAAC;EACjF,OAAO;;EAEP,MAAM,kBAAkB,EAAE,GAAG,IAAI;EACjC,QAAQ,IAAI,GAAG,CAAC,OAAO,GAAG,CAAC,EAAE;EAC7B,UAAU,MAAM;EAChB,SAAS;;EAET,QAAQ,QAAQ,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,OAAO,CAAC,gBAAgB,EAAC;;EAE7E,QAAQ,IAAI,EAAE,OAAO,EAAE,GAAG,IAAI,CAAC,QAAO;EACtC,QAAQ,IAAI,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,GAAG,EAAC;;EAE5D,QAAQ,IAAI,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,QAAQ,CAAC,CAAC,KAAK,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,QAAQ,CAAC,CAAC,KAAK,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE;EAChI,UAAU,IAAI,CAAC,OAAO,CAAC,eAAe,GAAG,SAAQ;EACjD,UAAU,IAAI,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,sBAAsB,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,EAAC;;EAE1F,UAAU,IAAI,OAAO,CAAC,MAAM,KAAK,CAAC,EAAE;EACpC,YAAY,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,GAAG,SAAQ;EAC/C,WAAW;;EAEX,UAAU,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,QAAQ,EAAC;EACtC,SAAS;EACT,OAAO;;EAEP,MAAM,gBAAgB,EAAE,GAAG,IAAI;EAC/B,QAAQ,IAAI,EAAE,eAAe,EAAE,OAAO,EAAE,kBAAkB,EAAE,gBAAgB,EAAE,GAAG,IAAI,CAAC,QAAO;EAC7F,QAAQ,IAAI,UAAU,GAAG,KAAI;;EAE7B,QAAQ,IAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,gBAAe;;EAE/C,QAAQ,IAAI,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE;EAChC,UAAU,UAAU,GAAG,MAAK;EAC5B,SAAS,MAAM,IAAI,OAAO,CAAC,MAAM,KAAK,CAAC,EAAE;EACzC,UAAU,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,GAAG,IAAI,CAAC,SAAQ;EAClD,SAAS;;EAET,QAAQ,IAAI,UAAU,EAAE;EACxB,UAAU,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;EAC9B,YAAY,QAAQ,EAAE,IAAI,CAAC,gBAAgB;EAC3C,YAAY,QAAQ,EAAE,IAAI,CAAC,QAAQ;EACnC,WAAW,EAAC;;EAEZ,UAAU,IAAI,CAAC,OAAO,CAAC,gBAAgB,GAAG,gBAAe;EACzD,SAAS;;EAET,QAAQ,QAAQ,CAAC,mBAAmB,CAAC,aAAa,EAAE,kBAAkB,EAAC;EACvE,QAAQ,QAAQ,CAAC,mBAAmB,CAAC,WAAW,EAAE,gBAAgB,EAAC;EACnE,OAAO;EACP,KAAK,EAAC;;EAEN,IAAI,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,IAAI,EAAE;EACtC,MAAM,kBAAkB,EAAE,GAAG,IAAI;EACjC,QAAQ,IAAI,EAAE,SAAS,EAAE,QAAQ,EAAE,QAAQ,EAAE,GAAG,GAAG,CAAC,OAAM;;EAE1D,QAAQ,IAAI,QAAQ,KAAK,QAAQ,EAAE;EACnC,UAAU,MAAM;EAChB,SAAS;;EAET,QAAQ,IAAI,EAAE,WAAW,EAAE,eAAe,EAAE,GAAG,IAAI,CAAC,QAAO;;EAE3D,QAAQ,QAAQ,SAAS;EACzB,UAAU,KAAK,MAAM;EACrB,YAAY,IAAI,GAAG,GAAG,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,IAAI,IAAI,eAAe,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAC;;EAExF,YAAY,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE;EAC7B,cAAc,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,WAAW,EAAC;;EAEpD,cAAc,OAAO,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC;EAC1C,gBAAgB,OAAO,EAAE,CAAC,cAAc,EAAE,QAAQ,CAAC,gFAAgF,EAAE,eAAe,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;EACpK,eAAe,CAAC;EAChB,aAAa;;EAEb,YAAY,KAAK;EACjB,SAAS;EACT,OAAO;;EAEP,MAAM,WAAW,EAAE,IAAI,CAAC,OAAO,CAAC,kBAAkB;EAClD,KAAK,EAAC;EACN,GAAG;;EAEH,EAAE,WAAW,kBAAkB,CAAC,GAAG;EACnC,IAAI,OAAO,CAAC,MAAM,CAAC;EACnB,GAAG;;EAEH,EAAE,IAAI,gBAAgB,CAAC,GAAG;EAC1B,IAAI,OAAO,IAAI,CAAC,OAAO,CAAC,sBAAsB,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC;EAC7E,GAAG;;EAEH,EAAE,IAAI,QAAQ,CAAC,GAAG;EAClB,IAAI,OAAO,IAAI,CAAC,OAAO,CAAC,sBAAsB,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC;EACrE,GAAG;EACH,CAAC;;EAED,cAAc,CAAC,MAAM,CAAC,eAAe,EAAE,mBAAmB,CAAC;;;;;;;;"}