{"version":3,"file":"author-slider.min.js","sources":["../src/element.js"],"sourcesContent":["class AuthorSliderElement extends AuthorBaseElement(HTMLElement) {\n  constructor (templateString = null) {\n    super(templateString || `{{TEMPLATE-STRING}}`)\n\n    this.UTIL.defineProperties({\n      defaultAxis: {\n        private: true,\n        default: 'x'\n      },\n\n      handles: {\n        private: true,\n        readonly: true,\n        get: () => this.querySelectorAll('author-slider-handle')\n      },\n\n      validAxisValues: {\n        private: true,\n        readonly: true,\n        default: ['x', 'y', '*']\n      },\n\n      currentPosition: {\n        private: true,\n        default: {\n          x: 0,\n          y: 0\n        }\n      },\n\n      position: {\n        private: true,\n        default: {\n          x: 0,\n          y: 0\n        }\n      },\n\n      previousPosition: {\n        private: true,\n        default: {\n          x: 0,\n          y: 0\n        }\n      }\n    })\n\n    this.UTIL.defineAttributes({\n      axis: this.PRIVATE.defaultAxis\n    })\n\n    this.UTIL.definePrivateMethods({\n      generateCoordinates: (getX, getY) => {\n        switch (this.axis) {\n          case '*': return {\n            x: getX(),\n            y: getY()\n          }\n\n          case 'x': return {\n            x: getX(),\n            y: null\n          }\n\n          case 'y': return {\n            x: null,\n            y: getY()\n          }\n\n          default: return this.UTIL.throwError({\n            message: !this.axis\n              ? 'No axis specified'\n              : `Invalid axis \"${this.axis}\"`\n          })\n        }\n      },\n\n      generatePositionObject: (position = this.PRIVATE.position) => this.PRIVATE.generateCoordinates(() => ({\n        px: position.x,\n        pct: this.UTIL.getPercentageDecimal(position.x, this.clientWidth)\n      }), () => ({\n        px: position.y,\n        pct: this.UTIL.getPercentageDecimal(position.y, this.clientHeight)\n      })),\n\n      getRelativePosition: evt => {\n        let dims = this.getBoundingClientRect()\n\n        return this.PRIVATE.generateCoordinates(() => {\n          return Math.min(Math.max(evt.pageX - dims.left - window.scrollX, 0), this.clientWidth)\n        }, () => {\n          return Math.min(Math.max(evt.pageY - dims.top - window.scrollY, 0), this.clientHeight)\n        })\n      },\n\n      pointerdownHandler: evt => {\n        let previous = this.PRIVATE.position\n        let reposition = true\n        this.PRIVATE.position = this.PRIVATE.getRelativePosition(evt)\n\n        let { handles, position, pointermoveHandler } = this.PRIVATE\n\n        if (handles.length > 1) {\n          return\n        }\n\n        if (handles.length !== 0) {\n          handles.item(0).position = this.position\n        }\n\n        this.emit('change', {\n          previous: this.PRIVATE.generatePositionObject(previous),\n          position: this.position\n        })\n\n        document.addEventListener('pointermove', this.PRIVATE.pointermoveHandler)\n      },\n\n      pointermoveHandler: evt => {\n        if (evt.buttons < 1) {\n          return\n        }\n\n        document.addEventListener('pointerup', this.PRIVATE.pointerupHandler)\n\n        let { handles } = this.PRIVATE\n        let relative = this.PRIVATE.getRelativePosition(evt)\n\n        if ((!this.position.x || relative.x !== this.position.x.px) || (!this.position.y || relative.y !== this.position.y.px)) {\n          this.PRIVATE.currentPosition = relative\n          let position = this.PRIVATE.generatePositionObject(this.PRIVATE.currentPosition)\n\n          if (handles.length !== 0) {\n            handles.item(0).position = position\n          }\n\n          this.emit('slide', position)\n        }\n      },\n\n      pointerupHandler: evt => {\n        let { currentPosition, handles, pointermoveHandler, pointerupHandler } = this.PRIVATE\n        let reposition = true\n\n        this.PRIVATE.position = currentPosition\n\n        if (handles.length > 1) {\n          reposition = false\n        } else if (handles.length !== 0) {\n          handles.item(0).position = this.position\n        }\n\n        if (reposition) {\n          this.emit('change', {\n            previous: this.previousPosition,\n            position: this.position\n          })\n\n          this.PRIVATE.previousPosition = currentPosition\n        }\n\n        document.removeEventListener('pointermove', pointermoveHandler)\n        document.removeEventListener('pointerup', pointerupHandler)\n      }\n    })\n\n    this.UTIL.registerListeners(this, {\n      'attribute.change': evt => {\n        let { attribute, oldValue, newValue } = evt.detail\n\n        if (newValue === oldValue) {\n          return\n        }\n\n        let { defaultAxis, validAxisValues } = this.PRIVATE\n\n        switch (attribute) {\n          case 'axis':\n            let arr = newValue.split(' ').filter(axis => validAxisValues.includes(axis))\n\n            if (!arr.length) {\n              this.setAttribute('axis', defaultAxis)\n\n              return this.UTIL.throwError({\n                message: `Invalid axis \"${newValue}\". Valid values include any combination of the following, separated by spaces: \"${validAxisValues.join('\", \"')}\"`\n              })\n            }\n\n            break\n        }\n      },\n\n      pointerdown: this.PRIVATE.pointerdownHandler\n    })\n  }\n\n  static get observedAttributes () {\n    return ['axis']\n  }\n\n  get previousPosition () {\n    return this.PRIVATE.generatePositionObject(this.PRIVATE.previousPosition)\n  }\n\n  get position () {\n    return this.PRIVATE.generatePositionObject(this.PRIVATE.position)\n  }\n}\n\ncustomElements.define('author-slider', AuthorSliderElement)\n\nexport default AuthorSliderElement\n"],"names":["AuthorSliderElement","AuthorBaseElement","HTMLElement","[object Object]","templateString","super","this","UTIL","defineProperties","defaultAxis","private","default","handles","readonly","get","querySelectorAll","validAxisValues","currentPosition","x","y","position","previousPosition","defineAttributes","axis","PRIVATE","definePrivateMethods","generateCoordinates","getX","getY","throwError","message","generatePositionObject","px","pct","getPercentageDecimal","clientWidth","clientHeight","getRelativePosition","evt","dims","getBoundingClientRect","Math","min","max","pageX","left","window","scrollX","pageY","top","scrollY","pointerdownHandler","previous","pointermoveHandler","length","item","emit","document","addEventListener","buttons","pointerupHandler","relative","reposition","removeEventListener","registerListeners","attribute.change","attribute","oldValue","newValue","detail","split","filter","includes","setAttribute","join","pointerdown","observedAttributes","customElements","define"],"mappings":"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"}