{"version":3,"file":"author-slider.es5.min.js","sources":["../src/element.js"],"sourcesContent":["class AuthorSliderElement extends AuthorBaseElement(HTMLElement) {\n  constructor (templateString = null) {\n    super(templateString || `{{TEMPLATE-STRING}}`)\n\n    this.UTIL.defineProperties({\n      defaultAxis: {\n        private: true,\n        default: 'x'\n      },\n\n      dimensions: {\n        private: true,\n        readonly: true,\n        get: () => this.getBoundingClientRect()\n      },\n\n      handles: {\n        private: true,\n        readonly: true,\n        get: () => this.querySelectorAll('author-slider-handle')\n      },\n\n      validAxisValues: {\n        private: true,\n        readonly: true,\n        default: ['x', 'y', '*']\n      },\n\n      currentPosition: {\n        private: true,\n        default: {\n          x: 0,\n          y: 0\n        }\n      },\n\n      position: {\n        private: true,\n        default: {\n          x: 0,\n          y: 0\n        }\n      },\n\n      previousPosition: {\n        private: true,\n        default: {\n          x: 0,\n          y: 0\n        }\n      }\n    })\n\n    this.UTIL.defineAttributes({\n      axis: this.PRIVATE.defaultAxis\n    })\n\n    this.UTIL.definePrivateMethods({\n      generateCoordinates: (getX, getY) => {\n        switch (this.axis) {\n          case '*': return {\n            x: getX(),\n            y: getY()\n          }\n\n          case 'x': return {\n            x: getX(),\n            y: null\n          }\n\n          case 'y': return {\n            x: null,\n            y: getY()\n          }\n\n          default: return this.UTIL.throwError({\n            message: !this.axis\n              ? 'No axis specified'\n              : `Invalid axis \"${this.axis}\"`\n          })\n        }\n      },\n\n      generatePositionObject: (position = this.PRIVATE.position) => this.PRIVATE.generateCoordinates(() => ({\n        px: position.x,\n        pct: this.UTIL.getPercentageDecimal(position.x, this.clientWidth)\n      }), () => ({\n        px: position.y,\n        pct: this.UTIL.getPercentageDecimal(position.y, this.clientHeight)\n      })),\n\n      getRelativePosition: evt => {\n        let { top, left, width, height } = this.PRIVATE.dimensions\n\n        return this.PRIVATE.generateCoordinates(() => {\n          return Math.min(Math.max(evt.pageX - left - pageXOffset, 0), width)\n        }, () => {\n          return Math.min(Math.max(evt.pageY - top - pageYOffset, 0), height)\n        })\n      },\n\n      pointermoveHandler: evt => {\n        if (evt.buttons < 1) {\n          return\n        }\n\n        document.addEventListener('pointerup', this.PRIVATE.pointerupHandler)\n\n        let { handles } = this.PRIVATE\n        let relative = this.PRIVATE.getRelativePosition(evt)\n\n        if ((!this.position.x || relative.x !== this.position.x.px) || (!this.position.y || relative.y !== this.position.y.px)) {\n          this.PRIVATE.currentPosition = relative\n          let position = this.PRIVATE.generatePositionObject(this.PRIVATE.currentPosition)\n\n          if (handles.length !== 0) {\n            handles.item(0).position = position\n          }\n\n          this.emit('slide', position)\n        }\n      },\n\n      pointerupHandler: evt => {\n        let { currentPosition, handles, pointermoveHandler, pointerupHandler } = this.PRIVATE\n        let reposition = true\n\n        this.PRIVATE.position = currentPosition\n\n        if (handles.length > 1) {\n          reposition = false\n        } else if (handles.length !== 0) {\n          handles.item(0).position = this.position\n        }\n\n        if (reposition) {\n          this.emit('change', {\n            previous: this.previousPosition,\n            position: this.position\n          })\n\n          this.PRIVATE.previousPosition = currentPosition\n        }\n\n        document.removeEventListener('pointermove', pointermoveHandler)\n        document.removeEventListener('pointerup', pointerupHandler)\n      },\n    })\n\n    this.UTIL.registerListeners(this, {\n      'attribute.change': evt => {\n        let { attribute, oldValue, newValue } = evt.detail\n\n        if (newValue === oldValue) {\n          return\n        }\n\n        let { defaultAxis, validAxisValues } = this.PRIVATE\n\n        switch (attribute) {\n          case 'axis':\n            let arr = newValue.split(' ').filter(axis => validAxisValues.includes(axis))\n\n            if (!arr.length) {\n              this.setAttribute('axis', defaultAxis)\n\n              return this.UTIL.throwError({\n                message: `Invalid axis \"${newValue}\". Valid values include any combination of the following, separated by spaces: \"${validAxisValues.join('\", \"')}\"`\n              })\n            }\n\n            break\n        }\n      },\n\n      pointerdown: evt => {\n        let previous = this.PRIVATE.position\n        let reposition = true\n        this.PRIVATE.position = this.PRIVATE.getRelativePosition(evt)\n\n        let { handles, position, pointermoveHandler } = this.PRIVATE\n\n        if (handles.length > 1) {\n          return\n        }\n\n        if (handles.length !== 0) {\n          handles.item(0).position = this.position\n        }\n\n        this.emit('change', {\n          previous: this.PRIVATE.generatePositionObject(previous),\n          position: this.position\n        })\n\n        document.addEventListener('pointermove', this.PRIVATE.pointermoveHandler)\n      }\n    })\n  }\n\n  static get observedAttributes () {\n    return ['axis']\n  }\n\n  get previousPosition () {\n    return this.PRIVATE.generatePositionObject(this.PRIVATE.previousPosition)\n  }\n\n  get position () {\n    return this.PRIVATE.generatePositionObject(this.PRIVATE.position)\n  }\n}\n\ncustomElements.define('author-slider', AuthorSliderElement)\n\nexport default AuthorSliderElement\n"],"names":["AuthorSliderElement","templateString","UTIL","defineProperties","defaultAxis","private","default","dimensions","readonly","get","_this","getBoundingClientRect","handles","querySelectorAll","validAxisValues","currentPosition","x","y","position","previousPosition","defineAttributes","axis","PRIVATE","definePrivateMethods","generateCoordinates","getX","getY","throwError","message","generatePositionObject","px","pct","getPercentageDecimal","clientWidth","clientHeight","getRelativePosition","evt","top","left","width","height","Math","min","max","pageX","pageXOffset","pageY","pageYOffset","pointermoveHandler","buttons","document","addEventListener","pointerupHandler","relative","length","item","emit","reposition","previous","removeEventListener","registerListeners","detail","attribute","oldValue","newValue","split","filter","includes","setAttribute","join","pointerdown","AuthorBaseElement","HTMLElement","this","customElements","define"],"mappings":"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"}