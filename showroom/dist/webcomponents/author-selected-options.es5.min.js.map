{"version":3,"file":"author-selected-options.es5.min.js","sources":["../src/element.js"],"sourcesContent":["class AuthorSelectedOptionsElement extends AuthorBaseElement(HTMLElement) {\n  constructor () {\n    super(`{{TEMPLATE-STRING}}`)\n\n    this.UTIL.defineProperties({\n      options: {\n        private: true,\n        default: []\n      }\n    })\n\n    this.UTIL.definePrivateMethods({\n      appendCaret: () => {\n        // let xmlns = 'http://www.w3.org/2000/svg'\n        // let width = 24\n        // let height = 24\n        //\n        // let caret = document.createElementNS(xmlns, 'svg')\n        // caret.slot = 'beforeend'\n        // caret.setAttributeNS(null, 'width', width)\n        // caret.setAttributeNS(null, 'height', height)\n        // caret.setAttributeNS(null, 'viewBox', `0 0 ${width} ${height}`)\n        // caret.setAttributeNS(null, 'fill', 'none')\n        // caret.setAttributeNS(null, 'stroke', 'currentColor')\n        // caret.setAttributeNS(null, 'stroke-width', '3')\n        // caret.setAttributeNS(null, 'stroke-linecap', 'square')\n        // caret.setAttributeNS(null, 'stroke-linejoin', 'miter')\n        //\n        // let shape = document.createElementNS(xmlns, 'polyline')\n        // shape.setAttributeNS(null, 'points', '6 9 12 15 18 9')\n        //\n        // caret.appendChild(shape)\n        // this.appendChild(caret)\n\n        // this.insertAdjacentHTML('beforeend', `<svg slot=\"beforeend\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"3\" stroke-linecap=\"square\" stroke-linejoin=\"miter\"><polyline points=\"6 9 12 15 18 9\"></polyline></svg>`)\n      },\n\n      optionSelectionHandler: evt => {\n        evt.stopPropagation()\n\n        this.clear(evt.detail.length === 0)\n        evt.detail.forEach((option, index) => this.add(option, index === evt.detail.length - 1))\n      },\n\n      parentStateChangeHandler: evt => {\n        let { name, value } = evt.detail\n\n        switch (name) {\n          case 'multiple':\n            if (!value) {\n              return this.on('mousedown', this.PRIVATE.mousedownHandler)\n            }\n\n            return this.off('mousedown', this.PRIVATE.mousedownHandler)\n\n          default: return\n        }\n      },\n\n      mousedownHandler: evt => this.emit('toggle', null, this.parentNode)\n    })\n\n    this.UTIL.registerListeners(this, {\n      connected: () => {\n        // this.PRIVATE.appendCaret()\n        this.update()\n        this.parentNode.on('state.change', this.PRIVATE.parentStateChangeHandler)\n      },\n\n      disconnected: () => {\n        this.parentNode.off('state.change', this.PRIVATE.parentStateChangeHandler)\n      },\n\n      mousedown: this.PRIVATE.mousedownHandler,\n      'options.selected': this.PRIVATE.optionSelectionHandler\n    })\n  }\n\n  get list () {\n    return this.PRIVATE.options.map(option => option.displayElement.text).join(', ')\n  }\n\n  add (option, update = true) {\n    this.PRIVATE.options.push(option)\n    update && this.update()\n  }\n\n  clear (update = true) {\n    this.PRIVATE.options = []\n    update && this.update()\n  }\n\n  remove (option, update = true) {\n    this.PRIVATE.options.splice(this.PRIVATE.options.indexOf(option), 1)\n    update && this.update()\n  }\n\n  update (options = this.PRIVATE.options) {\n    if (options !== this.PRIVATE.options) {\n      this.PRIVATE.options = options\n    }\n\n    this.innerHTML = options.length > 0\n      ? this.list\n      : this.parentNode.placeholder || ''\n  }\n}\n\ncustomElements.define('author-selected-options', AuthorSelectedOptionsElement)\n\nexport default AuthorSelectedOptionsElement\n"],"names":["AuthorSelectedOptionsElement","super","this","UTIL","defineProperties","options","private","default","definePrivateMethods","appendCaret","optionSelectionHandler","evt","stopPropagation","clear","detail","length","forEach","option","index","add","parentStateChangeHandler","name","value","off","PRIVATE","mousedownHandler","on","emit","parentNode","registerListeners","connected","update","disconnected","mousedown","options.selected","prototypeAccessors","list","map","displayElement","text","join","push","remove","splice","indexOf","innerHTML","placeholder","AuthorBaseElement","HTMLElement","customElements","define"],"mappings":"uSAAA,IAAMA,cACJ,wBACEC,YAAM,qWAENC,KAAKC,KAAKC,iBAAiB,CACzBC,QAAS,CACPC,SAAS,EACTC,QAAS,MAIbL,KAAKC,KAAKK,qBAAqB,CAC7BC,yBAyBAC,gCAAwBC,GACtBA,EAAIC,kBAEJV,EAAKW,MAA4B,IAAtBF,EAAIG,OAAOC,QACtBJ,EAAIG,OAAOE,iBAASC,EAAQC,UAAUhB,EAAKiB,IAAIF,EAAQC,IAAUP,EAAIG,OAAOC,OAAS,MAGvFK,kCAA0BT,GACxB,MAAsBA,EAAIG,0BAE1B,OAAQO,GACN,IAAK,WACH,OAAKC,EAIEpB,EAAKqB,IAAI,YAAarB,EAAKsB,QAAQC,kBAHjCvB,EAAKwB,GAAG,YAAaxB,EAAKsB,QAAQC,kBAK7C,QAAS,SAIbA,0BAAkBd,UAAOT,EAAKyB,KAAK,SAAU,KAAMzB,EAAK0B,eAG1D1B,KAAKC,KAAK0B,kBAAkB3B,KAAM,CAChC4B,qBAEE5B,EAAK6B,SACL7B,EAAK0B,WAAWF,GAAG,eAAgBxB,EAAKsB,QAAQJ,2BAGlDY,wBACE9B,EAAK0B,WAAWL,IAAI,eAAgBrB,EAAKsB,QAAQJ,2BAGnDa,UAAW/B,KAAKsB,QAAQC,iBACxBS,mBAAoBhC,KAAKsB,QAAQd,4IAIrCyB,EAAIC,oBACF,OAAOlC,KAAKsB,QAAQnB,QAAQgC,aAAIpB,UAAUA,EAAOqB,eAAeC,OAAMC,KAAK,mBAG7ErB,aAAKF,EAAQc,mBAAS,GACpB7B,KAAKsB,QAAQnB,QAAQoC,KAAKxB,GAC1Bc,GAAU7B,KAAK6B,sBAGjBlB,eAAOkB,mBAAS,GACd7B,KAAKsB,QAAQnB,QAAU,GACvB0B,GAAU7B,KAAK6B,sBAGjBW,gBAAQzB,EAAQc,mBAAS,GACvB7B,KAAKsB,QAAQnB,QAAQsC,OAAOzC,KAAKsB,QAAQnB,QAAQuC,QAAQ3B,GAAS,GAClEc,GAAU7B,KAAK6B,sBAGjBA,gBAAQ1B,kBAAUH,KAAKsB,QAAQnB,SACzBA,IAAYH,KAAKsB,QAAQnB,UAC3BH,KAAKsB,QAAQnB,QAAUA,GAGzBH,KAAK2C,UAA6B,EAAjBxC,EAAQU,OACrBb,KAAKkC,KACLlC,KAAK0B,WAAWkB,aAAe,8CAxGIC,kBAAkBC,qBA4G7DC,eAAeC,OAAO,0BAA2BlD"}